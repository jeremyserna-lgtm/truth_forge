# Description: Regenerate clean transcript from source JSONL
# Tool: Bash

python3 << 'PYTHON_EOF' > /Users/jeremyserna/PrimitiveEngine/docs/records/PERSON_DOCUMENT_CONVERSATION_2025-12-24.md
import json

filepath = "/Users/jeremyserna/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl"

print("""# Person Document Conversation Transcript

**Session ID**: `3018bf4e-565e-4c52-b5a6-aae9278bfea7`
**Date**: December 24, 2025
**Source**: `~/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl`

---
""")

with open(filepath, 'r') as f:
    lines = f.readlines()

for line in lines:
    obj = json.loads(line)
    msg_type = obj.get('type', '')

    if msg_type == 'user':
        content = obj.get('message', {}).get('content', [])
        for item in content:
            if isinstance(item, dict) and item.get('type') == 'text':
                text = item.get('text', '')
                if text.strip():
                    print("## User")
                    print("")
                    print(text)
                    print("")
                    print("---")
                    print("")

    elif msg_type == 'assistant':
        content = obj.get('message', {}).get('content', [])
        for item in content:
            if isinstance(item, dict):
                if item.get('type') == 'thinking':
                    thinking = item.get('thinking', '')
                    print("## Thinking")
                    print("")
                    print(thinking)
                    print("")
                    print("---")
                    print("")
                elif item.get('type') == 'text':
                    text = item.get('text', '')
                    if text.strip():
                        print("## Assistant")
                        print("")
                        print(text)
                        print("")
                        print("---")
                        print("")
                elif item.get('type') == 'tool_use':
                    name = item.get('name', '')
                    input_obj = item.get('input', {})
                    print("## Tool Use")
                    print("")
                    print(f"**{name}**")
                    print("")
                    print("```json")
                    print(json.dumps(input_obj, indent=2))
                    print("```")
                    print("")
                    print("---")
                    print("")
PYTHON_EOF
