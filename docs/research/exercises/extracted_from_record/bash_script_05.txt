# Description: Write clean transcript to file
# Tool: Bash

python3 << 'EOF' > /Users/jeremyserna/PrimitiveEngine/docs/records/PERSON_DOCUMENT_CONVERSATION_2025-12-24.md
import json

# Read the file
with open('/Users/jeremyserna/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl', 'r') as f:
    lines = f.readlines()

print("# Person Document Conversation Transcript")
print("")
print("**Session ID**: `3018bf4e-565e-4c52-b5a6-aae9278bfea7`")
print("**Date**: December 24, 2025")
print("**Source**: `~/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl`")
print("")
print("---")
print("")

for line in lines:
    try:
        obj = json.loads(line)
        msg_type = obj.get('type', '')

        if msg_type == 'user':
            message = obj.get('message', {})
            content = message.get('content', [])

            for item in content:
                if isinstance(item, dict):
                    if item.get('type') == 'text':
                        text = item.get('text', '')
                        if text.strip():
                            print("## User")
                            print("")
                            print(text)
                            print("")
                            print("---")
                            print("")

        elif msg_type == 'assistant':
            message = obj.get('message', {})
            content = message.get('content', [])

            for item in content:
                if isinstance(item, dict):
                    item_type = item.get('type', '')
                    if item_type == 'thinking':
                        thinking = item.get('thinking', '')
                        if thinking.strip():
                            print("## Thinking")
                            print("")
                            print(thinking)
                            print("")
                            print("---")
                            print("")
                    elif item_type == 'text':
                        text = item.get('text', '')
                        if text.strip():
                            print("## Assistant")
                            print("")
                            print(text)
                            print("")
                            print("---")
                            print("")
                    elif item_type == 'tool_use':
                        tool_name = item.get('name', '')
                        tool_input = item.get('input', {})
                        print("## Tool Use")
                        print("")
                        print(f"**{tool_name}**")
                        print("")
                        print("```json")
                        print(json.dumps(tool_input, indent=2))
                        print("```")
                        print("")
                        print("---")
                        print("")
    except:
        pass
EOF
