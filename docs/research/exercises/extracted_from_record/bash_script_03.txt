# Description: Extract exact conversation content
# Tool: Bash

python3 << 'EOF'
import json

# Read the file
with open('/Users/jeremyserna/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl', 'r') as f:
    lines = f.readlines()

output = []

for line in lines:
    try:
        obj = json.loads(line)
        msg_type = obj.get('type', '')

        if msg_type == 'user':
            message = obj.get('message', {})
            content = message.get('content', [])

            for item in content:
                if isinstance(item, dict):
                    if item.get('type') == 'text':
                        text = item.get('text', '')
                        # Include everything, including ide context
                        if text.strip():
                            output.append(('USER_MESSAGE', text))

        elif msg_type == 'assistant':
            message = obj.get('message', {})
            content = message.get('content', [])

            for item in content:
                if isinstance(item, dict):
                    item_type = item.get('type', '')
                    if item_type == 'thinking':
                        thinking = item.get('thinking', '')
                        if thinking.strip():
                            output.append(('THINKING', thinking))
                    elif item_type == 'text':
                        text = item.get('text', '')
                        if text.strip():
                            output.append(('ASSISTANT_MESSAGE', text))
                    elif item_type == 'tool_use':
                        tool_name = item.get('name', '')
                        tool_input = item.get('input', {})
                        output.append(('TOOL_USE', f"{tool_name}: {json.dumps(tool_input, indent=2)}"))
    except:
        pass

# Print full content
for entry_type, content in output:
    print(f"\n{'='*60}")
    print(f"[{entry_type}]")
    print('='*60)
    print(content)
EOF
