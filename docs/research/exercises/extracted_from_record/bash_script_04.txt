# Description: Generate clean markdown transcript
# Tool: Bash

python3 << 'EOF'
import json

# Read the file
with open('/Users/jeremyserna/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl', 'r') as f:
    lines = f.readlines()

md_output = []
md_output.append("# Person Document Conversation Transcript")
md_output.append("")
md_output.append("**Session ID**: `3018bf4e-565e-4c52-b5a6-aae9278bfea7`")
md_output.append("**Date**: December 24, 2025")
md_output.append("**Source**: `~/.claude/projects/-Users-jeremyserna-Truth-Engine/3018bf4e-565e-4c52-b5a6-aae9278bfea7.jsonl`")
md_output.append("")
md_output.append("---")
md_output.append("")

for line in lines:
    try:
        obj = json.loads(line)
        msg_type = obj.get('type', '')

        if msg_type == 'user':
            message = obj.get('message', {})
            content = message.get('content', [])

            for item in content:
                if isinstance(item, dict):
                    if item.get('type') == 'text':
                        text = item.get('text', '')
                        if text.strip():
                            md_output.append("## User")
                            md_output.append("")
                            md_output.append(text)
                            md_output.append("")
                            md_output.append("---")
                            md_output.append("")

        elif msg_type == 'assistant':
            message = obj.get('message', {})
            content = message.get('content', [])

            for item in content:
                if isinstance(item, dict):
                    item_type = item.get('type', '')
                    if item_type == 'thinking':
                        thinking = item.get('thinking', '')
                        if thinking.strip():
                            md_output.append("## Thinking")
                            md_output.append("")
                            md_output.append(thinking)
                            md_output.append("")
                            md_output.append("---")
                            md_output.append("")
                    elif item_type == 'text':
                        text = item.get('text', '')
                        if text.strip():
                            md_output.append("## Assistant")
                            md_output.append("")
                            md_output.append(text)
                            md_output.append("")
                            md_output.append("---")
                            md_output.append("")
                    elif item_type == 'tool_use':
                        tool_name = item.get('name', '')
                        tool_input = item.get('input', {})
                        md_output.append("## Tool Use")
                        md_output.append("")
                        md_output.append(f"**{tool_name}**")
                        md_output.append("")
                        md_output.append("```json")
                        md_output.append(json.dumps(tool_input, indent=2))
                        md_output.append("```")
                        md_output.append("")
                        md_output.append("---")
                        md_output.append("")
    except:
        pass

print('\n'.join(md_output))
EOF
